<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archives - Mur des Théories (V100.9.9 OMNI-MASTER)</title>
    
    <script src="OMNI_MASTER_LEXICON.js"></script>
    <script src="security.js"></script>

    <style>
        :root { 
            --noir-fond: #010105; 
            --omni-rouge: #660011; 
            --omni-rouge-eclat: #ff3333; 
            --lumiere-violette: rgba(136, 0, 255, 0.35);
            --gaz-nebuleuse: rgba(100, 0, 255, 0.15);
            --cosplay-gold: #ffcc00;
            --pulsar-cyan: rgba(200, 230, 255, 0.8);
        }

        body {
            margin: 0; background-color: var(--noir-fond); color: white;
            font-family: 'Courier New', monospace; min-height: 100vh; overflow-x: hidden;
            background: radial-gradient(circle at 15% 20%, var(--lumiere-violette) 0%, transparent 60%), var(--noir-fond);
            background-attachment: fixed;
            transition: box-shadow 0.5s ease, filter 0.15s ease;
        }

        /* --- EFFET VIBRATION SYSTÈME --- */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            40% { transform: translate(3px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            80% { transform: translate(3px, 1px) rotate(-1deg); }
            100% { transform: translate(1px, -2px) rotate(1deg); }
        }
        .system-shake { animation: shake 0.4s; }

        /* --- QUASAR MAÎTRE --- */
        .quasar-container-left { position: fixed; top: 10%; left: 8%; width: 150px; height: 150px; z-index: -2; animation: pulsar-rotate 20s linear infinite; }
        .black-hole { width: 100%; height: 100%; background: #000; border-radius: 50%; box-shadow: 0 0 60px white, inset 0 0 30px var(--pulsar-cyan); }
        .jet { position: absolute; top: 50%; left: 50%; width: 4px; height: 1200px; background: linear-gradient(0deg, transparent, var(--pulsar-cyan), white, var(--pulsar-cyan), transparent); transform: translate(-50%, -50%) rotate(-45deg); opacity: 0.7; filter: blur(1px); }
        @keyframes pulsar-rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* --- STYLE MAÎTRE --- */
        .master-post { border: 1px solid var(--cosplay-gold) !important; background: rgba(255, 204, 0, 0.08) !important; box-shadow: 0 0 15px rgba(255, 204, 0, 0.2); animation: gold-glow 2s infinite alternate; }
        @keyframes gold-glow { from { box-shadow: 0 0 5px rgba(255, 204, 0, 0.2); } to { box-shadow: 0 0 20px rgba(255, 204, 0, 0.4); } }
        .master-tag { color: var(--cosplay-gold); font-size: 0.65rem; font-weight: bold; letter-spacing: 2px; text-transform: uppercase; }

        /* --- GALAXIE --- */
        .stars { position: fixed; inset: 0; z-index: -10; background-image: radial-gradient(1px 1px at 10% 15%, #fff, transparent), radial-gradient(2px 2px at 35% 65%, var(--pulsar-cyan), transparent), radial-gradient(1px 1px at 75% 35%, var(--cosplay-gold), transparent); background-size: 400px 400px; animation: twinkle 8s infinite alternate ease-in-out; }
        @keyframes twinkle { 0% { opacity: 0.2; } 100% { opacity: 0.6; } }
        .space-dust { position: fixed; inset: 0; z-index: -9; background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.6) 100%); mix-blend-mode: screen; pointer-events: none; opacity: 0.5; }

        /* --- PLANÈTES --- */
        .nebula-planet { position: fixed; border-radius: 50%; z-index: 500; box-shadow: inset -15px -15px 30px rgba(0,0,0,0.9); transition: transform 0.2s; }
        .p-gold { width: 50px; height: 50px; background: var(--cosplay-gold); box-shadow: 0 0 35px var(--cosplay-gold); top: 15%; right: 10%; animation: floatGold 25s infinite ease-in-out; cursor: none !important; z-index: 2000; }
        @keyframes floatGold { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(-3vw, 5vh); } }
        
        .p-blue { width: 75px; height: 75px; background: #0044aa; top: 35%; left: 5%; animation: floatBlue 40s infinite ease-in-out; }
        .p-red { width: 45px; height: 45px; background: var(--omni-rouge); bottom: 15%; right: 5%; animation: floatRed 30s infinite ease-in-out; }
        @keyframes floatBlue { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(6vw, 12vh); } }
        @keyframes floatRed { 0%, 100% { transform: translate(0,0); } 50% { transform: translate(-8vw, -10vh); } }

        /* --- INTERFACE --- */
        .container { max-width: 850px; margin: 40px auto; padding: 20px; position: relative; z-index: 100; }
        h1 { text-align: center; font-size: 3rem; letter-spacing: 12px; text-shadow: 0 0 25px var(--omni-rouge); }
        .box { background: rgba(0, 0, 0, 0.95); border: 1px solid #400; padding: 45px; backdrop-filter: blur(5px); }
        .btn-send { background: var(--omni-rouge); color: white; border: 1px solid #800; padding: 18px; cursor: pointer; width: 100%; font-weight: bold; letter-spacing: 3px; }
        textarea { width: 100%; background: #080000; border: 1px solid #500; color: white; padding: 20px; margin-bottom: 25px; font-family: inherit; outline: none; font-size: 1rem; }
        .omni-term { color: var(--omni-rouge-eclat); border-bottom: 1px dashed var(--omni-rouge); font-weight: bold; }
        #omni-logs { font-size: 0.65rem; color: #700; margin-top: 30px; text-align: left; padding: 12px; border: 1px solid #300; line-height: 1.6; font-family: monospace; }
    </style>
</head>
<body id="main-body">

    <div id="omni-header-notice" style="position: relative; z-index: 2001; background: rgba(15,0,0,0.9); border-bottom: 1px solid var(--omni-rouge); padding: 12px;">
        <p style="color: var(--omni-rouge-eclat); margin: 0; font-size: 0.85rem; letter-spacing: 2px; text-align: center;">
            [SOURCE_DETECTED: FR] — ORIGINAL_WORK: <strong style="color: #fff;">SHADRASY: Le Souffle Originel</strong> 
            <br>
            <span style="color: #600; font-size: 0.7rem;">English Translation: SHADRASY: The Original Breath | Status: Canonical Lexicon Active</span>
        </p>
    </div>

    <div class="quasar-container-left"><div class="jet"></div><div class="black-hole"></div></div>
    <div class="stars"></div>
    <div class="space-dust"></div>

    <div id="galaxy-receptor">
        <div class="nebula-planet p-blue"></div>
        <div class="nebula-planet p-red"></div>
        <div class="nebula-planet p-gold" id="master-trigger" onclick="checkMasterClicks()" title="Astre Maître"></div>
    </div>

    <div class="container">
        <h1>OMNI ARCHIVES</h1>
        <div class="box" id="terminal-box">
            <label id="status-label" style="color:var(--omni-rouge); display:block; margin-bottom:20px; font-size: 0.9rem; letter-spacing: 2px; font-weight: bold;">
                TRANSMISSION DE THÉORIE (MODE CIVIL) :
            </label>
            <form onsubmit="return processTheory()">
                <textarea id="theory-input" rows="6" placeholder="Analyse du signal en cours..." required></textarea>
                <button type="submit" class="btn-send">TRANSMETTRE AU CENTRE OMNI</button>
            </form>
            <div id="display-area" style="margin-top: 50px; border-top: 1px solid #400; padding-top: 30px;"></div>
            <div id="omni-logs">
                >> OMNI_SCANNER_ACTIVE... <br>
                >> LEXICON_DATABASE_V100.9.9_LOADED... <br>
                >> PROTOCOL: RED_SPECTRUM_STRICT
            </div>
        </div>
        <a href="index.html" style="display:block; text-align:center; margin-top:50px; color:#500; text-decoration:none; font-size:0.75rem; border: 1px solid #300; padding: 15px; letter-spacing: 2px;"> 
            < REPASSER LE PORTAIL VERS LE CENTRE 
        </a>
    </div>

    <script>
        let isMasterMode = false;
        let masterClicks = 0;
        let lastMasterClick = 0;

        function checkMasterClicks() {
            const now = Date.now();
            if (now - lastMasterClick < 600) {
                masterClicks++;
            } else {
                masterClicks = 1;
            }
            lastMasterClick = now;

            if (masterClicks === 3) {
                isMasterMode = !isMasterMode;
                masterClicks = 0;
                
                // EFFET VISUEL : Vibration du terminal
                const box = document.getElementById('terminal-box');
                box.classList.add('system-shake');
                setTimeout(() => box.classList.remove('system-shake'), 400);

                // FLASH DE COULEUR
                const flash = document.createElement('div');
                flash.style.position = 'fixed';
                flash.style.inset = '0';
                flash.style.zIndex = '9999';
                flash.style.backgroundColor = isMasterMode ? 'var(--cosplay-gold)' : 'var(--omni-rouge)';
                flash.style.opacity = '0.5';
                document.body.appendChild(flash);
                setTimeout(() => flash.remove(), 150);

                toggleMasterMode();
            }
        }

        function toggleMasterMode() {
            const label = document.getElementById('status-label');
            const logs = document.getElementById('omni-logs');
            const body = document.getElementById('main-body');

            if(isMasterMode) {
                label.innerHTML = "ACCÈS ARCHITECTE ACTIVÉ — CANON DOMINANT";
                label.style.color = "var(--cosplay-gold)";
                body.style.boxShadow = "inset 0 0 150px rgba(255, 204, 0, 0.25)";
                logs.innerHTML += "<br>>> ARCHITECT_ID_CONFIRMED: ACCESS_GRANTED_V2031";
            } else {
                label.innerHTML = "TRANSMISSION DE THÉORIE (MODE CIVIL) :";
                label.style.color = "var(--omni-rouge)";
                body.style.boxShadow = "none";
                logs.innerHTML += "<br>>> SESSION_LOGOUT: SYSTEM_REVERTED_TO_CIVIL";
            }
        }

        function processTheory() {
            const input = document.getElementById('theory-input');
            let text = input.value;
            const displayArea = document.getElementById('display-area');
            if(text.length < 10) { alert("SIGNAL TROP FAIBLE."); return false; }

            const nomsFemmes = ["Jenna", "Emma", "Manon", "Camille", "Christina", "Azelis", "Léa", "Elena"];
            const nomsHommes = ["Jordan", "Kaiden", "Merick", "Théo", "Gus", "ZelTrhyld", "Kenzo", "Yan", "Joseph"];
            
            let pointHTML = "";
            if (nomsFemmes.some(n => text.includes(n))) pointHTML = '<span class="point-frequence alerte-femme"></span>';
            else if (nomsHommes.some(n => text.includes(n))) pointHTML = '<span class="point-frequence alerte-homme"></span>';

            if (typeof OMNI_MASTER_LEXICON !== 'undefined') {
                for (let cat in OMNI_MASTER_LEXICON) {
                    for (let key in OMNI_MASTER_LEXICON[cat]) {
                        let vars = OMNI_MASTER_LEXICON[cat][key];
                        for (let l in vars) {
                            if (vars[l] && vars[l].length > 2) {
                                let esc = vars[l].replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                                let regex = new RegExp(esc, 'gi');
                                text = text.replace(regex, `<span class="omni-term">${vars['fr']}</span>`);
                            }
                        }
                    }
                }
            }

            const newTheory = document.createElement('div');
            if(isMasterMode) newTheory.className = "master-post";
            let masterSign = isMasterMode ? '<span class="master-tag">[ARCHITECTE]</span>' : '<span style="color:var(--omni-rouge-eclat); font-size:0.65rem; letter-spacing:2px; font-weight:bold;">SIGNAL_REÇU</span>';
            newTheory.style.cssText = "background: rgba(255,255,255,0.03); border-left: 4px solid var(--omni-rouge); padding: 25px; margin-bottom: 25px; display: flex; align-items: center; transition: 0.3s;";
            newTheory.innerHTML = `${pointHTML}<div style="flex: 1;">${masterSign}<span style="color:#eee; display:block; margin-top:8px; line-height:1.6; font-size:0.95rem;">"${text}"</span></div>`;
            displayArea.prepend(newTheory);
            input.value = "";
            return false;
        }
    </script>
</body>
</html>
