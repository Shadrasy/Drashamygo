<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archives - Mur des Théories (V100.9.9 OMNI-MASTER)</title>
    
    <script src="OMNI_MASTER_LEXICON.js"></script>
    <script src="security.js"></script>

    <style>
        :root { 
            --noir-fond: #010105; 
            --vhs-vert: #00ff41;
            --lumiere-violette: rgba(136, 0, 255, 0.35);
            --gaz-nebuleuse: rgba(100, 0, 255, 0.15);
            --fluo-hanny: rgba(0, 255, 120, 0.2);
            --pois-vert: #39ff14;
            --cosplay-gold: #ffcc00;
        }

        body {
            margin: 0; background-color: var(--noir-fond); color: white;
            font-family: 'Courier New', monospace; min-height: 100vh; overflow-x: hidden;
            background: radial-gradient(circle at 15% 20%, var(--lumiere-violette) 0%, transparent 60%), var(--noir-fond);
            background-attachment: fixed;
        }

        /* --- BANDEAU D'ALERTE ORIGINE --- */
        #omni-header-notice {
            background: rgba(20, 20, 20, 0.9);
            border-bottom: 1px solid var(--vhs-vert);
            padding: 10px; text-align: center;
            position: sticky; top: 0; z-index: 2000;
            backdrop-filter: blur(10px);
        }

        /* --- POINTS DE FRÉQUENCE --- */
        .point-frequence {
            width: 10px; height: 10px; border-radius: 50%;
            display: inline-block; margin-right: 12px;
            box-shadow: 0 0 12px currentColor; flex-shrink: 0;
        }
        .alerte-femme { color: #ff0000; background-color: #ff0000; } 
        .alerte-homme { color: #1a2a6c; background-color: #1a2a6c; border: 1px solid #4a90e2; }

        /* --- INTERFACE BOUTONS --- */
        .nav-auth { position: absolute; top: 20px; right: 20px; z-index: 3000; }
        .btn-auth { 
            background: transparent; border: 1px solid var(--vhs-vert); color: var(--vhs-vert);
            padding: 5px 15px; cursor: pointer; font-size: 0.7rem; margin-left: 10px;
            transition: 0.3s;
        }
        .btn-auth:hover { background: var(--vhs-vert); color: black; }

        /* --- STYLE MAÎTRE --- */
        .master-post { border: 1px solid var(--cosplay-gold) !important; background: rgba(255, 204, 0, 0.05) !important; }
        .master-tag { color: var(--cosplay-gold); font-size: 0.6rem; font-weight: bold; letter-spacing: 2px; }

        /* --- MOTEUR VHS --- */
        body::after {
            content: " "; display: block; position: fixed; top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.04), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.04));
            z-index: 999; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        .container { max-width: 850px; margin: 40px auto; padding: 20px; position: relative; z-index: 100; }
        h1 { text-align: center; font-size: 3rem; letter-spacing: 10px; text-shadow: 0 0 20px var(--vhs-vert); }
        .box { background: rgba(0, 0, 0, 0.92); border: 1px solid #333; padding: 40px; }
        .btn-send { background: var(--vhs-vert); color: black; border: none; padding: 15px; cursor: pointer; width: 100%; font-weight: bold; }
        textarea { width: 100%; background: #050505; border: 1px solid #444; color: white; padding: 15px; margin-bottom: 20px; font-family: inherit; outline: none; }
        
        .nebula-planet { position: fixed; border-radius: 50%; z-index: -5; box-shadow: inset -15px -15px 30px rgba(0,0,0,0.8); }
        .p-gold { width: 35px; height: 35px; background: var(--cosplay-gold); top: 50%; left: 50%; animation: orbit 45s linear infinite; cursor: crosshair; }
        @keyframes orbit { from { transform: rotate(0deg) translateX(38vw); } to { transform: rotate(360deg) translateX(38vw); } }
        
        .omni-term { color: var(--vhs-vert); border-bottom: 1px dashed var(--vhs-vert); font-weight: bold; }
    </style>
</head>
<body>

    <div id="omni-header-notice">
        <p style="color: var(--vhs-vert); margin: 0; font-size: 0.8rem;">
            [SOURCE_DETECTED: FR] — ORIGINAL_WORK: <strong style="color: #fff;">SHADRASY: Le Souffle Originel</strong> 
            <br>
            <span style="color: #aaa;">English Translation: SHADRASY: The Original Breath | Status: Canonical Lexicon Active</span>
        </p>
    </div>

    <div class="nav-auth">
        <button class="btn-auth" onclick="alert('Connexion au Terminal...')">CONNEXION</button>
        <button class="btn-auth" onclick="alert('Déconnexion...')">DÉCONNEXION</button>
    </div>

    <div class="nebula-planet p-gold" ondblclick="toggleMasterMode()"></div>

    <div class="container">
        <h1>OMNI ARCHIVES</h1>
        
        <div class="box">
            <label id="status-label" style="color:var(--vhs-vert); display:block; margin-bottom:15px; font-size: 0.8rem;">
                TRANSMISSION DE THÉORIE (MODE CIVIL) :
            </label>
            
            <form onsubmit="return processTheory()">
                <textarea id="theory-input" rows="6" placeholder="Écrivez votre analyse..." required></textarea>
                <button type="submit" class="btn-send">TRANSMETTRE AU CENTRE</button>
            </form>
            
            <div id="display-area" style="margin-top: 50px; border-top: 1px dashed #444; padding-top: 30px;">
                </div>
        </div>
        
        <a href="index.html" style="display:block; text-align:center; margin-top:40px; color:#666; text-decoration:none; font-size:0.7rem;"> 
            < REPASSER LE PORTAIL 
        </a>
    </div>

    <script>
        let isMasterMode = false;

        function toggleMasterMode() {
            isMasterMode = !isMasterMode;
            const label = document.getElementById('status-label');
            if(isMasterMode) {
                label.innerHTML = "ACCÈS ARCHITECTE ACTIVÉ — CANON DOMINANT";
                label.style.color = "var(--cosplay-gold)";
                alert("SYSTÈME : Bienvenue Maître. Vos réponses seront marquées du sceau originel.");
            } else {
                label.innerHTML = "TRANSMISSION DE THÉORIE (MODE CIVIL) :";
                label.style.color = "var(--vhs-vert)";
            }
        }

        function processTheory() {
            const input = document.getElementById('theory-input');
            let text = input.value;
            const displayArea = document.getElementById('display-area');

            if(text.length < 10) {
                alert("SIGNAL TROP FAIBLE.");
                return false;
            }

            // --- POINTS DE FRÉQUENCE ---
            const nomsFemmes = ["Jenna", "Emma", "Manon", "Camille", "Christina", "Azelis", "Léa", "Elena"];
            const nomsHommes = ["Jordan", "Kaiden", "Merick", "Théo", "Gus", "ZelTrhyld", "Kenzo", "Yan", "Joseph"];

            let pointHTML = "";
            if (nomsFemmes.some(nom => text.includes(nom))) {
                pointHTML = '<span class="point-frequence alerte-femme"></span>';
            } else if (nomsHommes.some(nom => text.includes(nom))) {
                pointHTML = '<span class="point-frequence alerte-homme"></span>';
            }

            // --- SCAN LEXICAL (OMNI MASTER) ---
            if (typeof OMNI_MASTER_LEXICON !== 'undefined') {
                for (let cat in OMNI_MASTER_LEXICON) {
                    for (let key in OMNI_MASTER_LEXICON[cat]) {
                        let vars = OMNI_MASTER_LEXICON[cat][key];
                        for (let l in vars) {
                            if (vars[l].length > 2) {
                                let regex = new RegExp(vars[l], 'gi');
                                text = text.replace(regex, `<span class="omni-term">${vars['fr']}</span>`);
                            }
                        }
                    }
                }
            }

            // --- AFFICHAGE ---
            const newTheory = document.createElement('div');
            let masterClass = isMasterMode ? "master-post" : "";
            let masterSign = isMasterMode ? '<span class="master-tag">[ARCHITECTE]</span>' : '<span style="color:var(--vhs-vert); font-size:0.6rem;">SIGNAL_REÇU</span>';

            newTheory.style.cssText = "background: rgba(255,255,255,0.03); border-left: 3px solid var(--vhs-vert); padding: 20px; margin-bottom: 20px; display: flex; align-items: center;";
            if(isMasterMode) newTheory.classList.add('master-post');

            newTheory.innerHTML = `
                ${pointHTML}
                <div style="flex: 1;">
                    ${masterSign}
                    <span style="color:#eee; display:block; margin-top:5px;">"${text}"</span>
                </div>
            `;

            displayArea.prepend(newTheory);
            input.value = "";
            return false;
        }
    </script>
</body>
</html>
