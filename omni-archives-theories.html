<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archives - Mur des Théories (V100.9.9 OMNI-MASTER)</title>
    
    <script src="OMNI_MASTER_LEXICON.js"></script>
    <script src="security.js"></script>

    <style>
        :root { 
            --noir-fond: #010105; 
            --omni-rouge: #660011; 
            --omni-rouge-eclat: #ff3333; 
            --lumiere-violette: rgba(136, 0, 255, 0.35);
            --gaz-nebuleuse: rgba(100, 0, 255, 0.15);
            --cosplay-gold: #ffcc00;
            --pulsar-cyan: rgba(200, 230, 255, 0.8);
        }

        body {
            margin: 0; background-color: var(--noir-fond); color: white;
            font-family: 'Courier New', monospace; min-height: 100vh; overflow-x: hidden;
            background: radial-gradient(circle at 15% 20%, var(--lumiere-violette) 0%, transparent 60%), var(--noir-fond);
            background-attachment: fixed;
            transition: box-shadow 0.5s ease, filter 0.15s ease, background-color 0.2s ease;
        }

        /* --- TROU NOIR (Positionné à gauche) --- */
        .quasar-container-left { position: fixed; top: 10%; left: 8%; width: 150px; height: 150px; z-index: -2; }
        .black-hole { width: 100%; height: 100%; background: #000; border-radius: 50%; box-shadow: 0 0 50px white, inset 0 0 20px var(--pulsar-cyan); }
        .jet { 
            position: absolute; top: 50%; left: 50%; width: 2px; height: 1000px; 
            background: linear-gradient(0deg, transparent, var(--pulsar-cyan), white, var(--pulsar-cyan), transparent); 
            transform: translate(-50%, -50%) rotate(-45deg); opacity: 0.6;
        }

        /* --- BANDEAU D'ALERTE --- */
        #omni-header-notice {
            background: rgba(20, 0, 0, 0.95); border-bottom: 1px solid var(--omni-rouge);
            padding: 10px; text-align: center; position: sticky; top: 0; z-index: 2000; backdrop-filter: blur(10px);
        }

        /* --- POINTS DE FRÉQUENCE --- */
        .point-frequence {
            width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 12px;
            box-shadow: 0 0 12px currentColor; flex-shrink: 0;
        }
        .alerte-femme { color: #ff0000; background-color: #ff0000; } 
        .alerte-homme { color: #1a2a6c; background-color: #1a2a6c; border: 1px solid #4a90e2; }

        /* --- STYLE MAÎTRE --- */
        .master-post { 
            border: 1px solid var(--cosplay-gold) !important; background: rgba(255, 204, 0, 0.08) !important;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.2); animation: gold-glow 2s infinite alternate;
        }
        @keyframes gold-glow { from { box-shadow: 0 0 5px rgba(255, 204, 0, 0.2); } to { box-shadow: 0 0 20px rgba(255, 204, 0, 0.4); } }
        .master-tag { color: var(--cosplay-gold); font-size: 0.65rem; font-weight: bold; letter-spacing: 2px; text-transform: uppercase; }

        /* --- MOTEUR VHS --- */
        body::after {
            content: " "; display: block; position: fixed; top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.04), rgba(0, 255, 0, 0.01), rgba(0, 0, 255, 0.04));
            z-index: 999; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        /* --- GALAXIE PROFONDE --- */
        .stars {
            position: fixed; inset: 0; z-index: -10;
            background-image: 
                radial-gradient(1px 1px at 10% 15%, #fff, transparent),
                radial-gradient(1px 1px at 30% 60%, var(--pulsar-cyan), transparent),
                radial-gradient(2px 2px at 70% 30%, var(--cosplay-gold), transparent),
                radial-gradient(1px 1px at 85% 75%, #fff, transparent);
            background-size: 300px 300px; animation: twinkle 5s infinite alternate ease-in-out;
        }
        @keyframes twinkle { 0% { opacity: 0.3; transform: scale(1); } 100% { opacity: 0.8; transform: scale(1.05); } }

        .space-dust { position: fixed; inset: 0; z-index: -9; background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.5) 100%); mix-blend-mode: overlay; pointer-events: none; }

        .shooting-star {
            position: fixed; top: -10px; width: 100px; height: 1px; z-index: -8;
            background: linear-gradient(90deg, white, transparent);
            animation: shoot 8s linear infinite; opacity: 0; transform: rotate(-45deg);
        }
        @keyframes shoot {
            0% { transform: translateX(100vw) translateY(0) rotate(-45deg); opacity: 0; }
            5% { opacity: 1; }
            15% { transform: translateX(-100vw) translateY(100vh) rotate(-45deg); opacity: 0; }
            100% { opacity: 0; }
        }

        /* --- PLANÈTES --- */
        .nebula-planet { position: fixed; border-radius: 50%; z-index: -7; box-shadow: inset -15px -15px 30px rgba(0,0,0,0.8); top: 50%; left: 50%; }
        .p-gold { 
            width: 35px; height: 35px; background: var(--cosplay-gold); 
            box-shadow: 0 0 25px var(--cosplay-gold); animation: orbit 45s linear infinite; 
            cursor: none !important; /* Souris invisible sur la planète */
        }
        .p-blue { width: 45px; height: 45px; background: #0044aa; animation: orbit 60s linear infinite reverse; }
        .p-red { width: 30px; height: 30px; background: var(--omni-rouge); animation: orbit 35s linear infinite; }
        .p-purple { width: 55px; height: 55px; background: #220044; animation: orbit 80s linear infinite; }
        .p-ice { width: 25px; height: 25px; background: #b0e0e6; animation: orbit 50s linear infinite reverse; }
        .p-toxic { width: 40px; height: 40px; background: #003300; animation: orbit 70s linear infinite; }
        
        @keyframes orbit { from { transform: rotate(0deg) translateX(38vw); } to { transform: rotate(360deg) translateX(38vw); } }

        /* --- INTERFACE --- */
        .container { max-width: 850px; margin: 40px auto; padding: 20px; position: relative; z-index: 100; }
        h1 { text-align: center; font-size: 3rem; letter-spacing: 10px; text-shadow: 0 0 20px var(--omni-rouge); }
        .box { background: rgba(0, 0, 0, 0.94); border: 1px solid #300; padding: 40px; }
        .btn-send { background: var(--omni-rouge); color: white; border: 1px solid #800; padding: 15px; cursor: pointer; width: 100%; font-weight: bold; transition: 0.3s; }
        .btn-send:hover { background: #800; }
        textarea { width: 100%; background: #080000; border: 1px solid #400; color: white; padding: 15px; margin-bottom: 20px; font-family: inherit; outline: none; }
        .omni-term { color: var(--omni-rouge-eclat); border-bottom: 1px dashed var(--omni-rouge); font-weight: bold; }
        #omni-logs { font-size: 0.6rem; color: #600; margin-top: 20px; text-align: left; padding: 10px; border: 1px solid #300; line-height: 1.4; }
    </style>
</head>
<body>

    <div id="omni-header-notice">
        <p style="color: var(--omni-rouge-eclat); margin: 0; font-size: 0.8rem; letter-spacing: 1px;">
            [SOURCE_DETECTED: FR] — ORIGINAL_WORK: <strong style="color: #fff;">SHADRASY: Le Souffle Originel</strong> 
            <br>
            <span style="color: #600;">English Translation: SHADRASY: The Original Breath | Status: Canonical Lexicon Active</span>
        </p>
    </div>

    <div class="quasar-container-left">
        <div class="jet"></div><div class="black-hole"></div>
    </div>

    <div class="stars"></div>
    <div class="space-dust"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star" style="animation-delay: 4s; left: 30%;"></div>

    <div id="galaxy-receptor">
        <div class="nebula-planet p-gold" onclick="checkMasterClicks()" title="Astre Maître"></div>
        <div class="nebula-planet p-blue" style="animation-delay: -5s; opacity: 0.8;"></div>
        <div class="nebula-planet p-red" style="animation-delay: -12s; opacity: 0.7;"></div>
        <div class="nebula-planet p-purple" style="animation-delay: -20s; opacity: 0.9;"></div>
        <div class="nebula-planet p-ice" style="animation-delay: -30s; opacity: 0.6;"></div>
        <div class="nebula-planet p-toxic" style="animation-delay: -15s; opacity: 0.7;"></div>
    </div>

    <div class="container">
        <h1>OMNI ARCHIVES</h1>
        <div class="box">
            <label id="status-label" style="color:var(--omni-rouge); display:block; margin-bottom:15px; font-size: 0.8rem; letter-spacing: 1px; font-weight: bold;">
                TRANSMISSION DE THÉORIE (MODE CIVIL) :
            </label>
            <form onsubmit="return processTheory()">
                <textarea id="theory-input" rows="6" placeholder="Analyse du signal en cours..." required></textarea>
                <button type="submit" class="btn-send">TRANSMETTRE AU CENTRE</button>
            </form>
            <div id="display-area" style="margin-top: 50px; border-top: 1px solid #300; padding-top: 30px;"></div>
            <div id="omni-logs">
                >> OMNI_SCANNER_ACTIVE... <br>
                >> LEXICON_DATABASE_V100.9.9_LOADED... <br>
                >> PROTOCOL: RED_SPECTRUM_STRICT <br>
                >> WAITING_FOR_INCOMING_SIGNAL...
            </div>
        </div>
        <a href="index.html" style="display:block; text-align:center; margin-top:40px; color:#400; text-decoration:none; font-size:0.7rem; border: 1px solid #200; padding: 10px;"> 
            < REPASSER LE PORTAIL VERS LE CENTRE 
        </a>
    </div>

    <script>
        let isMasterMode = false;
        let masterClicks = 0;
        let lastMasterClick = 0;

        function checkMasterClicks() {
            const now = Date.now();
            if (now - lastMasterClick < 500) { masterClicks++; } 
            else { masterClicks = 1; }
            lastMasterClick = now;

            if (masterClicks === 3) {
                isMasterMode = !isMasterMode;
                toggleMasterMode();
                masterClicks = 0;
                
                // Effet flash pour validation
                const originalColor = document.body.style.backgroundColor;
                document.body.style.backgroundColor = "var(--omni-rouge)";
                setTimeout(() => { document.body.style.backgroundColor = originalColor; }, 200);
            }
        }

        function toggleMasterMode() {
            const label = document.getElementById('status-label');
            if(isMasterMode) {
                label.innerHTML = "ACCÈS ARCHITECTE ACTIVÉ — CANON DOMINANT";
                label.style.color = "var(--cosplay-gold)";
                document.body.style.boxShadow = "inset 0 0 100px rgba(255, 204, 0, 0.15)";
            } else {
                label.innerHTML = "TRANSMISSION DE THÉORIE (MODE CIVIL) :";
                label.style.color = "var(--omni-rouge)";
                document.body.style.boxShadow = "none";
            }
        }

        function processTheory() {
            const input = document.getElementById('theory-input');
            let text = input.value;
            const displayArea = document.getElementById('display-area');
            if(text.length < 10) { alert("SIGNAL TROP FAIBLE."); return false; }

            const nomsFemmes = ["Jenna", "Emma", "Manon", "Camille", "Christina", "Azelis", "Léa", "Elena"];
            const nomsHommes = ["Jordan", "Kaiden", "Merick", "Théo", "Gus", "ZelTrhyld", "Kenzo", "Yan", "Joseph"];
            
            let pointHTML = "";
            if (nomsFemmes.some(n => text.includes(n))) pointHTML = '<span class="point-frequence alerte-femme"></span>';
            else if (nomsHommes.some(n => text.includes(n))) pointHTML = '<span class="point-frequence alerte-homme"></span>';

            if (typeof OMNI_MASTER_LEXICON !== 'undefined') {
                for (let cat in OMNI_MASTER_LEXICON) {
                    for (let key in OMNI_MASTER_LEXICON[cat]) {
                        let vars = OMNI_MASTER_LEXICON[cat][key];
                        for (let l in vars) {
                            if (vars[l] && vars[l].length > 2) {
                                let esc = vars[l].replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                                let regex = new RegExp(esc, 'gi');
                                text = text.replace(regex, `<span class="omni-term">${vars['fr']}</span>`);
                            }
                        }
                    }
                }
            }

            const newTheory = document.createElement('div');
            if(isMasterMode) newTheory.className = "master-post";
            let masterSign = isMasterMode ? '<span class="master-tag">[ARCHITECTE]</span>' : '<span style="color:var(--omni-rouge-eclat); font-size:0.6rem; letter-spacing:1px; font-weight:bold;">SIGNAL_REÇU</span>';
            
            newTheory.style.cssText = "background: rgba(255,255,255,0.02); border-left: 3px solid var(--omni-rouge); padding: 20px; margin-bottom: 20px; display: flex; align-items: center;";
            newTheory.innerHTML = `${pointHTML}<div style="flex: 1;">${masterSign}<span style="color:#eee; display:block; margin-top:5px; line-height:1.5;">"${text}"</span></div>`;
            
            displayArea.prepend(newTheory);
            input.value = "";
            return false;
        }
    </script>
</body>
</html>
