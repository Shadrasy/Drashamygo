<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archives - Mur des Théories (V100.9.9 OMNI-MASTER)</title>
    
    <script src="OMNI_MASTER_LEXICON.js"></script>
    <script src="security.js"></script>

    <style>
        :root { 
            --noir-fond: #010105; 
            --omni-rouge: #660011; 
            --omni-rouge-eclat: #ff3333; 
            --lumiere-violette: rgba(136, 0, 255, 0.35);
            --gaz-nebuleuse: rgba(100, 0, 255, 0.15);
            --cosplay-gold: #ffcc00;
            --pulsar-cyan: rgba(200, 230, 255, 0.8);
        }

        body {
            margin: 0; background-color: var(--noir-fond); color: white;
            font-family: 'Courier New', monospace; min-height: 100vh; overflow-x: hidden;
            background: radial-gradient(circle at 15% 20%, var(--lumiere-violette) 0%, transparent 60%), var(--noir-fond);
            background-attachment: fixed;
            transition: box-shadow 0.5s ease, filter 0.15s ease, background-color 0.2s ease;
        }

        /* --- TROU NOIR --- */
        .quasar-container-left { position: fixed; top: 10%; left: 8%; width: 150px; height: 150px; z-index: -2; }
        .black-hole { width: 100%; height: 100%; background: #000; border-radius: 50%; box-shadow: 0 0 50px white, inset 0 0 20px var(--pulsar-cyan); }
        .jet { 
            position: absolute; top: 50%; left: 50%; width: 2px; height: 1000px; 
            background: linear-gradient(0deg, transparent, var(--pulsar-cyan), white, var(--pulsar-cyan), transparent); 
            transform: translate(-50%, -50%) rotate(-45deg); opacity: 0.6;
        }

        /* --- STYLE MAÎTRE --- */
        .master-post { 
            border: 1px solid var(--cosplay-gold) !important; background: rgba(255, 204, 0, 0.08) !important;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.2); animation: gold-glow 2s infinite alternate;
        }
        @keyframes gold-glow { from { box-shadow: 0 0 5px rgba(255, 204, 0, 0.2); } to { box-shadow: 0 0 20px rgba(255, 204, 0, 0.4); } }
        .master-tag { color: var(--cosplay-gold); font-size: 0.65rem; font-weight: bold; letter-spacing: 2px; text-transform: uppercase; }

        /* --- GALAXIE PROFONDE ET ITINÉRAIRES INDIVIDUELS --- */
        .stars {
            position: fixed; inset: 0; z-index: -10;
            background-image: 
                radial-gradient(1px 1px at 10% 15%, #fff, transparent),
                radial-gradient(1px 1px at 30% 60%, var(--pulsar-cyan), transparent),
                radial-gradient(2px 2px at 70% 30%, var(--cosplay-gold), transparent);
            background-size: 300px 300px; animation: twinkle 5s infinite alternate ease-in-out;
        }
        @keyframes twinkle { 0% { opacity: 0.3; } 100% { opacity: 0.7; } }

        .nebula-planet { position: fixed; border-radius: 50%; z-index: -7; box-shadow: inset -15px -15px 30px rgba(0,0,0,0.8); }

        /* Planète d'Or (Maître) - Flotte en haut à droite */
        .p-gold { 
            width: 40px; height: 40px; background: var(--cosplay-gold); 
            box-shadow: 0 0 30px var(--cosplay-gold); 
            top: 15%; right: 15%;
            animation: floatGold 12s infinite ease-in-out;
            cursor: none !important;
        }
        @keyframes floatGold { 
            0%, 100% { transform: translate(0, 0); } 
            50% { transform: translate(-20px, 30px); } 
        }

        /* Planète Bleue - Milieu Gauche */
        .p-blue { 
            width: 60px; height: 60px; background: #0044aa; 
            top: 40%; left: 10%;
            animation: floatBlue 18s infinite ease-in-out;
        }
        @keyframes floatBlue { 
            0%, 100% { transform: translate(0, 0); } 
            50% { transform: translate(40px, -20px); } 
        }

        /* Planète Rouge - Bas Droite */
        .p-red { 
            width: 35px; height: 35px; background: var(--omni-rouge); 
            bottom: 20%; right: 10%;
            animation: floatRed 15s infinite ease-in-out;
        }
        @keyframes floatRed { 
            0%, 100% { transform: translate(0, 0); } 
            50% { transform: translate(-30px, -40px); } 
        }

        /* Planète Violette - Haut Milieu */
        .p-purple { 
            width: 70px; height: 70px; background: #220044; 
            top: 10%; left: 40%;
            animation: floatPurple 22s infinite ease-in-out;
        }
        @keyframes floatPurple { 
            0%, 100% { transform: translate(0, 0); } 
            50% { transform: translate(30px, 50px); } 
        }

        /* Planète Glace - Bas Gauche */
        .p-ice { 
            width: 25px; height: 25px; background: #b0e0e6; 
            bottom: 15%; left: 20%;
            animation: floatIce 14s infinite ease-in-out;
        }
        @keyframes floatIce { 
            0%, 100% { transform: translate(0, 0); } 
            50% { transform: translate(50px, 20px); } 
        }

        /* Planète Toxique - Milieu Droite */
        .p-toxic { 
            width: 45px; height: 45px; background: #003300; 
            top: 60%; right: 5%;
            animation: floatToxic 20s infinite ease-in-out;
        }
        @keyframes floatToxic { 
            0%, 100% { transform: translate(0, 0); } 
            50% { transform: translate(-40px, 20px); } 
        }

        /* --- INTERFACE --- */
        .container { max-width: 850px; margin: 40px auto; padding: 20px; position: relative; z-index: 100; }
        h1 { text-align: center; font-size: 3rem; letter-spacing: 10px; text-shadow: 0 0 20px var(--omni-rouge); }
        .box { background: rgba(0, 0, 0, 0.94); border: 1px solid #300; padding: 40px; }
        .btn-send { background: var(--omni-rouge); color: white; border: 1px solid #800; padding: 15px; cursor: pointer; width: 100%; font-weight: bold; }
        textarea { width: 100%; background: #080000; border: 1px solid #400; color: white; padding: 15px; margin-bottom: 20px; font-family: inherit; outline: none; }
        .omni-term { color: var(--omni-rouge-eclat); border-bottom: 1px dashed var(--omni-rouge); font-weight: bold; }
        #omni-logs { font-size: 0.6rem; color: #600; margin-top: 20px; text-align: left; padding: 10px; border: 1px solid #300; line-height: 1.4; }
    </style>
</head>
<body>

    <div class="quasar-container-left"><div class="jet"></div><div class="black-hole"></div></div>
    <div class="stars"></div>

    <div id="galaxy-receptor">
        <div class="nebula-planet p-gold" onclick="checkMasterClicks()" title="Astre Maître"></div>
        <div class="nebula-planet p-blue"></div>
        <div class="nebula-planet p-red"></div>
        <div class="nebula-planet p-purple"></div>
        <div class="nebula-planet p-ice"></div>
        <div class="nebula-planet p-toxic"></div>
    </div>

    <div class="container">
        <h1>OMNI ARCHIVES</h1>
        <div class="box">
            <label id="status-label" style="color:var(--omni-rouge); display:block; margin-bottom:15px; font-size: 0.8rem; letter-spacing: 1px; font-weight: bold;">
                TRANSMISSION DE THÉORIE (MODE CIVIL) :
            </label>
            <form onsubmit="return processTheory()">
                <textarea id="theory-input" rows="6" placeholder="Analyse du signal en cours..." required></textarea>
                <button type="submit" class="btn-send">TRANSMETTRE AU CENTRE</button>
            </form>
            <div id="display-area" style="margin-top: 50px; border-top: 1px solid #300; padding-top: 30px;"></div>
            <div id="omni-logs">
                >> OMNI_SCANNER_ACTIVE... <br>
                >> PROTOCOL: RED_SPECTRUM_STRICT <br>
                >> WAITING_FOR_INCOMING_SIGNAL...
            </div>
        </div>
        <a href="index.html" style="display:block; text-align:center; margin-top:40px; color:#400; text-decoration:none; font-size:0.7rem; border: 1px solid #200; padding: 10px;"> 
            < REPASSER LE PORTAIL VERS LE CENTRE 
        </a>
    </div>

    <script>
        let isMasterMode = false;
        let masterClicks = 0;
        let lastMasterClick = 0;

        function checkMasterClicks() {
            const now = Date.now();
            if (now - lastMasterClick < 500) { masterClicks++; } 
            else { masterClicks = 1; }
            lastMasterClick = now;

            if (masterClicks === 3) {
                isMasterMode = !isMasterMode;
                toggleMasterMode();
                masterClicks = 0;
                const originalColor = document.body.style.backgroundColor;
                document.body.style.backgroundColor = isMasterMode ? "var(--cosplay-gold)" : "var(--omni-rouge)";
                setTimeout(() => { document.body.style.backgroundColor = "transparent"; }, 200);
            }
        }

        function toggleMasterMode() {
            const label = document.getElementById('status-label');
            const logs = document.getElementById('omni-logs');
            if(isMasterMode) {
                label.innerHTML = "ACCÈS ARCHITECTE ACTIVÉ — CANON DOMINANT";
                label.style.color = "var(--cosplay-gold)";
                document.body.style.boxShadow = "inset 0 0 100px rgba(255, 204, 0, 0.15)";
                logs.innerHTML += "<br>>> ARCHITECT_ID_CONFIRMED: ACCESS_GRANTED_V2031";
            } else {
                label.innerHTML = "TRANSMISSION DE THÉORIE (MODE CIVIL) :";
                label.style.color = "var(--omni-rouge)";
                document.body.style.boxShadow = "none";
                logs.innerHTML += "<br>>> SESSION_LOGOUT: SYSTEM_REVERTED_TO_CIVIL";
            }
        }

        function processTheory() {
            const input = document.getElementById('theory-input');
            let text = input.value;
            const displayArea = document.getElementById('display-area');
            if(text.length < 10) { alert("SIGNAL TROP FAIBLE."); return false; }

            const nomsFemmes = ["Jenna", "Emma", "Manon", "Camille", "Christina", "Azelis", "Léa", "Elena"];
            const nomsHommes = ["Jordan", "Kaiden", "Merick", "Théo", "Gus", "ZelTrhyld", "Kenzo", "Yan", "Joseph"];
            
            let pointHTML = "";
            if (nomsFemmes.some(n => text.includes(n))) pointHTML = '<span class="point-frequence alerte-femme"></span>';
            else if (nomsHommes.some(n => text.includes(n))) pointHTML = '<span class="point-frequence alerte-homme"></span>';

            if (typeof OMNI_MASTER_LEXICON !== 'undefined') {
                for (let cat in OMNI_MASTER_LEXICON) {
                    for (let key in OMNI_MASTER_LEXICON[cat]) {
                        let vars = OMNI_MASTER_LEXICON[cat][key];
                        for (let l in vars) {
                            if (vars[l] && vars[l].length > 2) {
                                let esc = vars[l].replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                                let regex = new RegExp(esc, 'gi');
                                text = text.replace(regex, `<span class="omni-term">${vars['fr']}</span>`);
                            }
                        }
                    }
                }
            }

            const newTheory = document.createElement('div');
            if(isMasterMode) newTheory.className = "master-post";
            let masterSign = isMasterMode ? '<span class="master-tag">[ARCHITECTE]</span>' : '<span style="color:var(--omni-rouge-eclat); font-size:0.6rem; letter-spacing:1px; font-weight:bold;">SIGNAL_REÇU</span>';
            newTheory.style.cssText = "background: rgba(255,255,255,0.02); border-left: 3px solid var(--omni-rouge); padding: 20px; margin-bottom: 20px; display: flex; align-items: center;";
            newTheory.innerHTML = `${pointHTML}<div style="flex: 1;">${masterSign}<span style="color:#eee; display:block; margin-top:5px; line-height:1.5;">"${text}"</span></div>`;
            displayArea.prepend(newTheory);
            input.value = "";
            return false;
        }
    </script>
</body>
</html>
